<link href="/sitecore modules/shell/GatherContent/css/GatherContent.css" rel="stylesheet" />
<link href="/sitecore modules/shell/GatherContent/css/dynatree/ui.dynatree.css" rel="stylesheet" />
<link href="/sitecore modules/shell/GatherContent/css/KoGrid.css" rel="stylesheet" />
<link href="/sitecore modules/shell/GatherContent/Import/Import.css" rel="stylesheet" />
<link href="/sitecore modules/shell/GatherContent/css/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/js/jquery_2.1.1.min.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/js/moment.min.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/js/knockout-3.4.0.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/js/koGrid-2.1.1.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/js/GatherContent.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/js/jquery-ui.custom.min.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/js/jquery.cookie.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/js/jquery.dynatree.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/Import/Import.js"></script>
<script type="text/javascript" language="javascript" src="/sitecore modules/shell/GatherContent/css/bootstrap/js/bootstrap.min.js"></script>

<script type="text/javascript">
    jQuery.noConflict();
    jQuery(document).ready(function () {
        ko.applyBindings(new ImportManager());
    });

</script>

<div data-bind="visible: getMode(1)" class="gathercontent-import">
    <div>
        <div class="filter_wrapper_import">
            <div class="title_filter">GATHER CONTENT PROJECT</div>
            <select class="custom_select" style="width: 250px" data-bind="options: projects, optionsText: 'Name', optionsValue: 'Id', value: project, event:{ change: $root.projectChanged}"></select>
        </div>


        <div class="filter_wrapper">
            <div class="filter_wrapper_import">
                <div class="title_filter" style="padding-right: 135px;">FILTER</div>
                <select class="custom_select" style="width: 250px" data-bind="options: statuses, optionsText: 'Name', optionsValue: 'Id', value: statusFilter, optionsCaption: 'STATUS', event:{ change: $root.filter }"></select>
                <select class="custom_select" style="width: 250px;" data-bind="options: templates, optionsText: 'Name', optionsValue: 'Id', value: templateFilter, optionsCaption: 'GATHER CONTENT TEMPLATE', event:{ change: $root.filter }"></select>
            </div>
            <div class="search_filter">
                <input placeholder="FILTER BY ITEM NAME (SEARCH)" autofocus data-bind="value: query, valueUpdate: 'keyup'" autocomplete="off">

            </div>
        </div>

        <div class="import-grid" data-bind="koGrid: gridOptions"></div>

        <div class="footer_btn">

            <input type="button" class="mappings-btn" style="margin-top: 0" value="Next>" data-bind="click: buttonClick.bind($data, 2)" />
            <div data-bind="text: errorText" class="warning-message"></div>

            <!--<input type="button" value="Close" class="closeButton" data-bind="click: buttonClick.bind($data, 5)" />-->
        </div>
        <div class="help-link">
            <a href="mailto:support@gathercontent.com">Need help?</a>
        </div>
    </div>
</div>

<div data-bind="if: getMode(2)" class="gathercontent-import2">
    <div>
        <div class="title_wrap">
            <h2 class="title">Confirm import selection</h2>
            <p>Please review your import selection before importing.</p>
        </div>
        <div class="language">
            Language
            <select class="custom_select" style="width: 250px" data-bind="options: languages, optionsText: 'Name', optionsValue: 'IsoCode', value: language"></select>
        </div>
        <div class="location">
            <div class="title_path">destination</div>
            <div style="position:relative;">
                <input class="input-block" placeholder="Default location" data-bind="value: defaultLocationTitle, click: openDropTree" type="text" />
                <div id="location-droptree" data-bind="visible: showDropTree" style="position: absolute;top: 145px;right: 20px;width: 300px;height: 400px;z-index: 1000;display: block">
                    <div style="width:300px;height:400px;">
                        <div> </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="import-confirm-grid import-confirm-grid2" data-bind="koGrid: gridConfirmOptions"></div>


        <div class="footer_btn">
            <div style="margin-bottom: 15px;">
                <input type="checkbox" data-bind="checked: statusPostState" />
                After successful import change status of item to <select data-bind="options: statuses, optionsText: 'Name', optionsValue: 'Id', value: statusFilter"></select> inside your GatherContent account.
                <br/>
                <label><input type="checkbox" data-bind="checked: expandGatherContentLinks" /> Expand GatherContent Links</label>
            </div>
            <input type="button" value="<Back" class="backBtn" data-bind="click: buttonClick.bind($data, 1)" />
            <input type="button" value="Import>" data-bind="click: buttonClick.bind($data, 3)" />
            <!--<input type="button" class="closeButton" value="Close" data-bind="click: buttonClick.bind($data, 5)" />-->
        </div>
        <div class="help-link">
            <a href="mailto:support@gathercontent.com">Need help?</a>
        </div>
    </div>
</div>

<div data-bind="if: getMode(3)">
    <div class="preloader_import text-center">
        <h2 class="title">Import in progress</h2>
        <p>Please do not close your browser. Depending on the number of Items you have selected the import can take some time.</p>
        <img src="../icons/sc-spinner32.gif" alt="">
    </div>
    <!--<input type="button" value="Next" data-bind="click: buttonClick.bind($data, 4)" />-->
</div>

<div data-bind="if: getMode(4)" class="gathercontent-import">
    <div>
        <h2 class="title">Import complete: Results.</h2>
        <img src="../icons/Right.png" width="20" height="20">
        <span data-bind="text: successImportedItemsCount()"></span> items were imported successfully.
        <div data-bind="if: items().length > 0">
            <div data-bind="if: notImportedItemsCount() > 0" class="import-padding">
                <img src="../icons/Warning (1).png" width="20" height="20"> <span data-bind=" text: notImportedItemsCount()"></span> items were not imported. Check errors below.
            </div>
            <div data-bind="css:{
    'info_footer' :  notImportedItemsCount() > 0
 }">
                <div class="import-result-grid" data-bind="koGrid: gridResultOptions"></div>
            </div>

            <div data-bind="if: notImportedItemsCount() > 0" class="import-padding" style="padding-left: 5px;">
                <span>Template not mapped:</span> Please check template mapping.<br />
                <span>Template fields mismatch:</span> This could be because the template in GatherContent has changed and the changed template has not been updated on Sitecore.
            </div>
        </div>
        <div class="footer_btn">
            <input type="button" class="closeButton" data-bind="click: buttonClick.bind($data, 5)" value="Close" />
        </div>
        <div class="help-link">
            <a href="mailto:support@gathercontent.com">Need help?</a>
        </div>
    </div>
</div>

<div data-bind="if: getMode(6)" class="gathercontent-import">
    <div>
        <h2 class="title"><span data-bind="text: errorText"></span></h2>
        <div class="footer_btn">
            <input type="button" class="closeButton" data-bind="click: buttonClick.bind($data, 5)" value="Close" />
        </div>
        <div class="help-link">
            <a href="mailto:support@gathercontent.com">Need help?</a>
        </div>
    </div>
</div>

<div class="preloader"></div>